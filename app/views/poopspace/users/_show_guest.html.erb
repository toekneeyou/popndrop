<div class="banner d-flex flex-column justify-content-between" style="background-image: linear-gradient(rgba(0,0,0,0.5),rgba(0,0,0,1)), url(https://upload.wikimedia.org/wikipedia/commons/f/f6/Mint_Hut_outhouse._Talkeetna_Mountains%2C_Alaska_%2830739423892%29.jpg);">

  <div class="profile-container">
    <div>
      <div class='profile-card card-padding'>
        <div class='profile-picture border-bottom'>
          <%= cl_image_tag @user.photo.url, class:'avatar-huge' %>
        </div>
          <div class='border-bottom card-padding'>
            <span>
              <i class="fas fa-toilet-paper paper-review"></i> <%= @review_count %>
            </span>
          </div>
        <div class='card-padding'>
          <span>Joined in <b><%= @user.created_at.to_s.match(/^\d+/) %></b>
          </span>
        </div>
      </div>
    </div>

    <div class='profile-description-card'>
      <div class='border-bottom'>
        <h2 class="text-white"><%= @user.first_name.capitalize%> <%= @user.last_name.capitalize %></h2>
      </div>
      <div class='user-listings'>
        <h2 class="text-white">Listings</h2>
        <% @toilets.each do |toilet| %>
          <div class="card rounded-lg">
            <div class="card-body d-flex justify-content-between rounded-lg">
                <div>
                  <h4 class="card-title"><%= link_to toilet.name, toilet_path(toilet) %></h4>
                  <p class="card-text"><%= toilet.description %></p>
                  <p class="card-text"><small class="text-muted">$<%= toilet.rate %> / min</small></p>
                </div>
                <div>
                  <% if toilet.photo.url.nil? %>
                    <%= link_to image_tag("https://www.thegazette.com/storyimage/GA/20181124/ARTICLE/181129809/AR/0/AR-181129809.jpg&MaxH=250&MaxW=450", alt: "alttext", style: "width: 200px", class: "rounded float-right"), toilet_path(toilet)  %>
                  <% else %>
                    <%= link_to cl_image_tag(toilet.photo.url, alt: "alttext", style: "width: 200px; height: 150px",class: "rounded float-right"), toilet_path(toilet)  %>
                  <% end %>
                </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>

  <div class='d-flex justify-content-center' style='margin-bottom: 175px;'>
    <div style='width:1000px;'>
      <h2 style='color:white;'>Reviews</h2>
      <div class='profile-container d-flex flex-column text-white card-padding' style='background-color:rgba(255,255,255,.3);width:1000px;margin:auto;border-radius:5px;'>
          <ul>
            <% @reviews.each do |review| %>
              <% if review.reviewable_type == "User" %>
                <li class='border-bottom'>
                  <div class="d-flex justify-content-start align-items-center">
                    <%= cl_image_tag User.find(review.user_id).photo, class:'avatar' %>
                    <span style='margin-left:5px;'><b><%= User.find(review.user_id).first_name.capitalize %></b> gave <i><%= review.reviewable.first_name %></i> a <b><%= review.rating %>/5</b></span>
                  </div>
                  <p><%= review.content %></p>
                </li>
              <% else %>
                <li class='border-bottom'>
                  <div class="d-flex justify-content-start align-items-center">
                  <%= cl_image_tag review.reviewable.photo, class:'avatar' %>

                  <span style='margin-left:5px;'><b><%= User.find(review.user_id).first_name.capitalize %></b> gave <i><%= review.reviewable.first_name %>  a <b><%= review.rating %>/5</b></span>
                </div>
                </li>
              <% end %>
            <% end %>
          </ul>
      </div>
    </div>
</div>



